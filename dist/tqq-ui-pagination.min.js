var dir=angular.module("tqq.ui",[]);
dir.factory("loading",function(){var d=!0;return{show:function(e){if(d){var i=document.createElement("section");i.className="load-box",document.body.style.overflowY="hidden",document.body.appendChild(i),document.getElementsByClassName("load-box")[0].innerHTML=' <div class="load-container"><div class="loader"><div class="loader-inner line-spin-fade-loader"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div></div>',d=!1}},hide:function(){var e=document.getElementsByClassName("load-box")[0];if(e)return document.body.removeChild(e),document.body.style.overflowY="auto",void(d=!0)}}});
dir.directive("tqqPagination",function(){function e(e,a,t,s){var i=[],n=Math.ceil(e/a),l=Math.ceil(t/2),g=Math.floor(t/2);if(n<=t)for(var r=1;r<=n;r++)i.push(r);else if(s<=l)for(var d=1;d<=t;d++)i.push(d);else if(s>l&&s+g<=n){var o=s-l+1,p=s-l+t;for(o;o<=p;o++)i.push(o)}else if(s>l&&s+g>n)for(var c=n-t+1;c<=n;c++)i.push(c);return i}function a(e,a){for(var t=[],s=Math.ceil(e/a),i=1;i<=s;i++)t.push(i);return t}return{restrict:"EA",replace:!0,scope:{totalItems:"=",maxSize:"=",itemsPerPage:"=",ngModel:"=",hideLast:"=",tqqChange:"&",itemSelectHide:"="},link:function(t,s,i,n){if(t.atrs=i,!i.ngModel)throw'"ng-model" is undefined \n 中文:"ng-model"为必传参数。';if(!i.itemsPerPage)throw'"items-per-page" is undefined \n 中文:"items-per-page"为必传参数。';if(!i.totalItems)throw'"total-items" is undefined \n 中文:"total-items"为必传参数。';var l,g,r;t.ngModel=t.ngModel||1,t.pageNum=Math.ceil(t.totalItems/(t.itemsPerPage||10)),t.pageArr=e(t.totalItems,t.itemsPerPage||10,t.maxSize||5,t.ngModel||1),t.allPageArr=a(t.totalItems,t.itemsPerPage||10),t.judge={first:"first",previous:"previous",next:"next",last:"last"},t.$watch("ngModel",function(a,s){l&&(t.pageArr=e(t.totalItems,t.itemsPerPage||10,t.maxSize||5,t.ngModel||1),t.tqqChange()),l=!0}),t.$watch("totalItems",function(s,i){s>0&&i>0&&(t.ngModel=1),g&&(t.pageArr=e(t.totalItems,t.itemsPerPage||10,t.maxSize||5,t.ngModel||1),t.allPageArr=a(t.totalItems,t.itemsPerPage||10),t.pageNum=Math.ceil(t.totalItems/(t.itemsPerPage||10))),g=!0}),t.$watch("itemsPerPage",function(){r&&(t.ngModel>1?t.ngModel=1:t.tqqChange(),t.pageArr=e(t.totalItems,t.itemsPerPage||10,t.maxSize||5,t.ngModel||1),t.allPageArr=a(t.totalItems,t.itemsPerPage||10),t.pageNum=Math.ceil(t.totalItems/(t.itemsPerPage||10))),r=!0}),t.updatePage=function(e){switch(e){case t.judge.first:t.ngModel=1;break;case t.judge.previous:t.ngModel>1&&t.ngModel--;break;case t.judge.next:t.ngModel<t.pageNum&&t.ngModel++;break;case t.judge.last:t.ngModel=t.pageNum;break;default:t.pageSelect=!1,t.ngModel=e}},t.updateItem=function(e){t.pageSelect=!1,t.numSelect=!1,t.itemsPerPage=e},t.updateShow=function(){t.pageSelect=!t.pageSelect}},template:'<nav><ul class="pagination mg-none {{atrs.sizeClass}}"><li ng-if="!hideLast"  ng-class="{disabled:ngModel===1}"><a href aria-label="First" ng-click="updatePage(judge.first)"><span ng-if="atrs.firstText">{{atrs.firstText}}</span><span aria-hidden="true" ng-if="!atrs.firstText" class="anniu">&laquo;</span></a></li><li ng-class="{disabled:ngModel===1}"><a href aria-label="Previous" ng-click="updatePage(judge.previous)"><span ng-if="atrs.previousText">{{atrs.previousText}}</span><span aria-hidden="true" ng-if="!atrs.previousText" class="anniu">&lsaquo;</span></a></li><li ng-repeat="val in pageArr track by $index" ng-class="{active:ngModel===val}"><a href ng-click="updatePage(val)">{{val}}</a></li><li ng-class="{disabled:ngModel===pageNum}"><a href aria-label="Next" ng-click="updatePage(judge.next)"><span ng-if="atrs.nextText">{{atrs.nextText}}</span><span aria-hidden="true" ng-if="!atrs.nextText"　class="anniu">&rsaquo;</span></a></li><li ng-if="!hideLast" ng-class="{disabled:ngModel===pageNum}"><a href aria-label="Last" ng-click="updatePage(judge.last)"><span ng-if="atrs.lastText">{{atrs.lastText}}</span><span aria-hidden="true" ng-if="!atrs.lastText"　class="anniu">&raquo;</span></a></li></ul><ul ng-if="!itemSelectHide" class="pagination pagination-init page-num-this {{atrs.sizeClass}}"><li><a href ng-click="updateShow()" ng-class="{active:pageSelect}">{{ngModel}}/{{pageNum}}</a><div class="page-list" ng-show="pageSelect"><div>每页显示</div><span ng-repeat="data in [10,20,50,100,200] track by $index" ng-class="{active:itemsPerPage===data}" ng-click="updateItem(data)">{{data}}</span><div>页&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp码</div><span ng-repeat="data in allPageArr track by $index" ng-class="{active:ngModel===data}" ng-click="updatePage(data)">{{data}}</span></div>'}});